<!DOCTYPE html>
<html lang="">
    <head>
  	<meta charset="utf-8">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<title>What Does That Mean To Play Us Out</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<style>
		.danceParty{
			position:absolute;
                        top:20px;
                        left: 20px;
		}
		.praful{
			float:left;
		}
	</style>
    </head>
    <script>
	$(document).ready(function(){
		var i = 0;
		var videos = [{weight:2, sources:['assets/meow.webm', 'assets/meow.m4v']},{weight:10, sources:['assets/Loop.webm', 'assets/Loop.m4v']},{weight:1, sources:['assets/Keyboard_Cat_Redux.webm']}];
		$('video').on('dblclick', function(event){
			if (this.paused == false) {
				this.pause();
			} else {
				this.play();
			}
		});
		$('.danceParty').on('click', '.praful', function(event) {
			event.preventDefault();
			$(this).remove();
		});
		$('html').on('click', function(event) {
			if (!$(event.target).is('.praful')) {
				$('.danceParty').append($('<img>').addClass('praful').attr('src', 'http://praful.danomoseley.com/ThePraful-Remix3.gif'));
			}
		});
		playlist = [];
		$.each(videos, function(k, video) {
			for (var i=0; i<video.weight; i++) {
				playlist.push(video.sources);
			}
		});
		$('video').on('ended', function(){
		    ++i;
		    var random = Math.floor(Math.random() * playlist.length);
		    $('video source').remove();
		    var video = playlist[random];
		    $.each(video, function(i, source) {
			$('video').append($("<source>").attr('type','video/'+source.split('.').pop()).attr('src',source)); 
		    });
		    $('video')[0].load();
		    current = video;
		});
	});
    </script>
    <script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-36201140-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
<body style="height:100%;background-color:black;margin:0;">
	<div class="danceParty"></div>
	<video style="width: 100%; height: 100%;" autoplay="">
		<source src="assets/Loop.webm" type="video/webm" />
		<source src="assets/Loop.m4v" type="video/mp4" />
	</video>
</body>
</html>
